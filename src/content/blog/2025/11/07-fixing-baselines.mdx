---
title: 'Fixing Baselines'
fancyTitle: true
description: 'DoÂ you know how toÂ center things inÂ CSS? InÂ year 2025? Easy! You justâ€¦ alignâ€¦ orÂ justifyâ€¦, ok, maybe just place? your contentâ€¦ orÂ items? â€¦Forget it, this post isÂ not about alignment. OrÂ isÂ it? This post isÂ about another common alignment concept that might seem simple: baseline alignment. InÂ it, IÂ share aÂ technique IÂ have already used for twelve years.'
tags: ['Typography', 'Obscure CSS', 'CSS']
pubDate: '2025-11-07'
mastodonPostId: '115510510399674122'

current: {
	drink: 'Lapsang Souchong tea',
	music: 'å¤¢ä¸­å¤¢ â€” Unforgiven',
}

bandcamp: {
	track: '3801234394',
	link: 'https://virginbabylonrecords.bandcamp.com/track/unforgiven',
}
---

import LiveExample from '@components/LiveExample.astro';

DoÂ you know how toÂ center things inÂ CSS? InÂ year 2025? Easy! You justâ€¦ alignâ€¦ orÂ justifyâ€¦, ok, maybe just place? your contentâ€¦ orÂ items? â€¦Forget it, this post isÂ not about alignment. OrÂ isÂ it?

This post isÂ about another common alignment concept that might seem simple: baseline alignment. InÂ it, IÂ share aÂ technique IÂ have already used for twelve years.

## Table of Contents

## The Definition

ToÂ quote from [the specs](https://drafts.csswg.org/css-inline/#css-metrics),

> AÂ <dfn>baseline</dfn> isÂ aÂ line along the inline axis ofÂ aÂ line box along which individual glyphs ofÂ text are aligned.

<figure>
	<svg xmlns="http://www.w3.org/2000/svg" xml:space="preserve" viewBox="0 0 176.1 48.4" fill="currentColor">
	<text transform="translate(0 31.091)"><tspan x="0" y="0" font-family="Arial, Helvetica" font-size="17">Apple</tspan><tspan x="46" y="0" font-family="Arial, Helvetica" font-size="35"> Orange</tspan></text>
	<path fill="none" stroke="#3fa9f5" stroke-miterlimit="10" d="M0 31.7h175"/>
	<g fill="none" stroke="#2e3192" stroke-miterlimit="10">
		<path d="M44.8 16.7v-1h-1"/>
		<path stroke-dasharray="2,2" d="M42 15.7H3"/>
		<path d="M1.5 15.7h-1v1"/>
		<path stroke-dasharray="2,2" d="M.5 19.2v15"/>
		<path d="M.5 34.7v1h1"/>
		<path stroke-dasharray="2,2" d="M4 35.7h39"/>
		<path d="M43.8 35.7h1v-1"/>
		<path stroke-dasharray="2,2" d="M44.5 33.2v-15"/>
	</g>
	<g fill="none" stroke="#2e3192" stroke-miterlimit="10">
		<path d="M175 1.5v-1h-1"/>
		<path stroke-dasharray="2,2" d="M172 .7H59"/>
		<path d="M58.2.5h-1v1"/>
		<path stroke-dasharray="2,2" d="M57.5 3.2v36"/>
		<path d="M57.2 40.7v1h1"/>
		<path stroke-dasharray="2,2" d="M60 41.7h113"/>
		<path d="M174 41.7h1v-1"/>
		<path stroke-dasharray="2,2" d="M174.5 38.2v-36"/>
	</g>
	</svg>
	<figcaption>Figure from the spec: Alphabetic text inÂ two font sizes with the baseline and em-boxes</figcaption>
</figure>

The specs goÂ into many details, and ifÂ you will start reading them (orÂ ifÂ you have enough practice), youâ€™ll get that itÂ <span style="display: inline-block; overflow: hidden">is</span> not <span style="display: inline-flex; place-items: center;"><span style="font-size: 2em;line-height: 0.5;">â­ï¸</span>simple</span>.

## The Problems & Solutions

IfÂ you pay aÂ close attention toÂ the previous sentence, you might get the idea.

### Overflowing Inline Elements

This isÂ the simplest problem, which, today, has aÂ simple solution. The problem: ifÂ you have anÂ element with `inline-block`, giving itÂ `overflow: hidden` (orÂ `auto`, `scroll`, etc.) will break the baseline:

<style>{`
figure > p::before {
	content: "";
	display: inline-block;
	height: 1px;
	background: deeppink;
	width: 100cqw;
	margin-left: -0.215em;
	margin-right: -100cqw;
	opacity: 0.75;
	position: relative;
	z-index: 1;
}
`}</style>

<LiveExample>
```HTML
<p>Hello, <span class="block-world">world</span>!</p>
```
```CSS
.block-world {
	display: inline-block;
	outline: 1px solid;
	overflow: hidden;
}
```
</LiveExample>

The solution: use `inline-flex` orÂ `inline-grid` instead. They will retain the baseline!

<LiveExample>
```HTML
<p>Hello, <span class="flex-world">world</span>!</p>
```
```CSS
.flex-world {
	display: inline-flex;
	outline: 1px solid;
	overflow: hidden;
}
```
</LiveExample>

More than eleven years ago â€” almost twelve â€” IÂ wrote aÂ dedicated article about this topic: [â€œBattle for Baselineâ€](https://kizu.dev/flex-baseline/). IfÂ you want toÂ read about all the crossbrowser issues IÂ had toÂ dig through toÂ make this work atÂ that time, IÂ invite you toÂ read it.

But today, now that `inline-flex` and `inline-grid` are [_baseline_](https://developer.mozilla.org/en-US/docs/Glossary/Baseline/Compatibility) (sorry), weÂ noÂ longer have the same bugs and issues. Hooray.

### Icons Before Text

The second problem can beÂ much more pronounced today, and does _not_ have aÂ solution built into the specs (orÂ â€” IÂ donâ€™t know about it).

ItÂ isÂ what happens when you have some inline element, for example, aÂ button, and then inside ofÂ it, but before its text, you add some icon. And then, you want toÂ center everything vertically inside, but, atÂ the same time, align this buttonâ€™s content with the baseline ofÂ the nearby text. ItÂ doesnâ€™t work:

<LiveExample>
```HTML
<p>
	Hello,
	<button type="button" class="button-world">
		<span class="icon">ğŸŒ</span>
		world
	</button>!
</p>
```
```CSS
.button-world {
	display: inline-flex;
	padding: 0 0.5em;
	gap: 0.5em;
	place-items: center;
	border: 1px solid;
	border-radius: 9em;
	overflow: hidden;
	font: inherit;
}

.icon {
	font-size: 2em;
}
```
</LiveExample>

IfÂ the `font-size` ofÂ the icon that contains anÂ emoji was the same asÂ ofÂ the text, itÂ would lookÂ ok. But ifÂ weÂ modify this elementâ€™s font-size, orÂ use anÂ empty element orÂ aÂ replaced element instead, then _this element_ will beÂ used for determining the baseline ofÂ our button.

This isÂ because, byÂ default, the button uses the _first_ â€œbaseline setâ€ for aligning that `inline-flex` element, and that first baseline will come from our icon!

### `baseline-source`

IfÂ weÂ dig aÂ bit into the specs, weÂ could find aÂ partial solution for our problem: the very obscure [`baseline-source`](https://drafts.csswg.org/css-inline/#propdef-baseline-source) property.

Why isÂ itÂ obscure?

First, itÂ isÂ not [_baseline_](https://developer.mozilla.org/en-US/docs/Glossary/Baseline/Compatibility) (IÂ amÂ soÂ sorry again), and isÂ [only supported](https://caniuse.com/wf-baseline-source) inÂ Firefox and Chrome, with support missing from Safari. ItÂ isÂ not even present onÂ MDN.

Then, ifÂ weÂ were toÂ use itÂ inÂ browsers that _do_ support itÂ toÂ address our problem, itÂ will help for aÂ simple case:

<LiveExample shouldHideHTML class="require-baseline-source">
```HTML
<p>
	Hello,
	<button type="button" class="button-world with-baseline-source">
		<span class="icon">ğŸŒ</span>
		world
	</button>!
</p>
```
```CSS
.with-baseline-source {
	baseline-source: last;
}
```
</LiveExample>

But â€” the only value other than `auto` and `first` isÂ `last`. And, guess what will happen ifÂ weÂ would also add anÂ icon toÂ the end ofÂ our button:

<LiveExample shouldHideHTML class="require-baseline-source">
```HTML
<p>
	Hello,
	<button type="button" class="button-world with-baseline-source">
		<span class="icon">ğŸŒ</span>
		world
		<span class="icon">ğŸ™€</span>
	</button>!
</p>
```
</LiveExample>

And, the second problem will happen ifÂ weÂ were toÂ have aÂ multiline button â€”Â and would want, for some reason, toÂ still use the default behavior ofÂ aligning itÂ via its _first_ line:

<LiveExample shouldHideHTML class="require-baseline-source">
```HTML
<p>
	Hello,
	<button type="button" class="button-world with-baseline-source">
		<span class="icon">ğŸŒ</span>
		wrapped<br/>world
	</button>!
</p>
```
</LiveExample>

ItÂ isÂ not just the _last element_ that defines the baseline now â€” itÂ isÂ the _last line box_ ofÂ the last element. Oops.

<aside>
Fun fact: before starting toÂ write this article, IÂ did not know about the `baseline-source` property! Now IÂ know â€” and you knowÂ too. IÂ hope Safari will pick this property up, and weÂ will have itâ€¦ everywhere.

Even though itÂ doesnâ€™t resolve our problem, IÂ can see how itÂ can beÂ useful inÂ some other niche cases.
</aside>

### AnÂ Extra Element Solution

So, how can weÂ solve this problem today, and more reliably?

The solution that IÂ used for years, but IÂ donâ€™t think IÂ ever shared (orÂ saw mentioned elsewhere â€” ifÂ someone did write about it, please let meÂ know!) â€” toÂ just use anÂ extra element _before_ the element that otherwise breaks our baseline. That extra element should have the same font metrics asÂ the real content, and weÂ need toÂ make this element toÂ not contribute any space, but otherwise this works pretty well:

<LiveExample shouldHideHTML>
```HTML
<p>
	Hello,
	<button type="button" class="button-world with-extra-element">
		<span class="icon">ğŸŒ</span>
		world
	</button>!
</p>
```
```CSS
.with-extra-element {
	--gap: 0.5em;
	gap: var(--gap);
}
.with-extra-element::before {
	content: '\a0'; /* &nbsp; */
	width: 0;
	display: inline-block;
	visibility: hidden;
	margin-left: calc(-1 * var(--gap, 0));
}
```
</LiveExample>

AÂ few things toÂ note:

- Because our element uses aÂ `gap`, weÂ have toÂ _remove_ the extra gap that will appear when weÂ insert the pseudo-element.
- IÂ amÂ using aÂ `'\a0'` â€” aÂ no-break space. IÂ found itÂ toÂ work the best. Extra tip: whenever you use escaped characters inÂ your CSS, add comments that communicate what theyÂ are.
- For itÂ toÂ not impact anything other than the baseline, weÂ give itÂ `width: 0` and hide itÂ via `visibility`.
- OfÂ course, ifÂ you donâ€™t have aÂ gap, you can skip the margin stuff.

And thatâ€™sÂ it!

#### Prior Art

While IÂ amÂ using this technique for [almost twelve years already](https://github.com/stylobate/stylobate/commit/9686fba68ec125fb472b9f54f7964c5d43081f52#diff-1ecb88dbb1890d2ca80274dc15f41eb5de8aefae213e8e50733cf44bb993287a), IÂ used [Marginalia search](https://marginalia-search.com/) toÂ look upÂ ifÂ anyone else mentioned itÂ elsewhere.

IÂ mightâ€™ve missed something, but the closest thing IÂ found isÂ [â€œSVG icon sizing and alignmentâ€](https://dimiterpetrov.com/blog/svg-icon-sizing-and-alignment/) article byÂ [Dimiter Petrov](https://dimiterpetrov.com/).

## Could There BeÂ aÂ BetterÂ Way?

Currently, weÂ can only control which baseline set isÂ used for our element _on the wrapper_ element.

But what ifÂ weÂ could have something like `baseline-presence: exclude` that could beÂ used onÂ our inner elements, soÂ weÂ could add itÂ toÂ our icons, and then they wonâ€™t participate inÂ the definition ofÂ our baseline?

Right after published this post, IÂ opened [an issue about this inÂ CSSWG](https://github.com/w3c/csswg-drafts/issues/13080), asÂ IÂ did not find any others that would cover this. IÂ work onÂ design systems for aÂ very long time, and this problem appears over and over inÂ all ofÂ them.

And â€” ifÂ you know ofÂ aÂ different solution â€” please let meÂ know, orÂ â€” even better â€”Â write your own post about itÂ and shareÂ it!
